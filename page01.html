<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="./css/animate02.css" />
</head>

<body>
    <!-- 操控按鈕 -->
    <div class="btn">
        <a href="javaScript:;">重置</a>
        <a href="index.html">樣式1</a>
        <a href="page01.html">樣式2</a>
        <a href="page02.html">樣式3</a>
    </div>
    <div class="Warp">
        <audio class="mp3" src='./image/coinMusic.mp3'></audio>
        <ul class="BackAnimate">
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
        </ul>
        <div class="RedPage">
            <div class="PageTop">
                <span class="coin"></span>
            </div>
            <div class="PageContant">
                <div class="PageContant__space">
                    <p class="PageContant__space_tit">恭喜獲得</p>
                    <p class="PageContant__space_dollar">100元</p>
                    <p class="PageContant__space_caption">總紅包150000元，會員發貨抽紅包</p>
                    <div class="PageContant__space_link">
                        <a href="#">說明詳情</a>
                        <a href="#">關閉</a>
                    </div>
                </div>
            </div>
            <div class="PageIcon"></div>
        </div>
    </div>

    <script>
        function ShowRedPage() {
            //開啟紅包
            var Warp = document.querySelector(".Warp");
            Warp.style.display = "block";

            //紅包變數
            var page = document.querySelector(".RedPage");
            var pageTop = document.querySelector(".PageTop");
            var BackAnimate = document.querySelector(".BackAnimate");
            var pageContant = document.querySelector(".PageContant");
            var PageCon_Space = document.querySelector(".PageContant__space");

            // 音效
            var mp3 = document.querySelector('.mp3');

            //關閉變數
            var Cancel01 = document.querySelectorAll(".PageContant__space_link > a")[1];

            // 觸發震動
            page.addEventListener("click", function () {
                if (page.className.indexOf('Animation') !== -1) return;
                page.classList.add("PageAnimation");

                // 打開信封袋
                setTimeout(function () {
                    pageTop.classList.add("rotate");
                    page.classList.add("PageAnimation");
                }, 500);

                // 信封取出
                setTimeout(function () {
                    PageCon_Space.classList.add("PageCon_SpaceAnimation");
                    pageContant.classList.add("PageContantAnimation");
                    TextRand(90)

                    mp3.volume = 0.1;
                    mp3.play();
                }, 800);

                // 錢幣背景動畫
                setTimeout(function () {
                    BackAnimate.classList.add("BackAnimate--active");
                }, 1000);
            });


            Cancel01.addEventListener("click", function () {
                Warp.style.display = "none";
            });


            //數字跳動
            function TextRand(total) {
                var dollor = document.querySelector(".PageContant__space_dollar");
                let i = 0;
                function num() {
                    if (i < total) {
                        i++;
                        setTimeout(num, (1 / total) * 1000);
                        dollor.innerHTML = i + "元";
                    }
                }
                num()
            }
        }

        
        function reStart() {
            var Warp = document.querySelector(".Warp");
            var btn = document.querySelectorAll('.btn > a');
            btn[0].addEventListener('click', function () {
                window.location.reload();
            })
        }
        reStart();
        ShowRedPage();





    </script>
</body>

</html>